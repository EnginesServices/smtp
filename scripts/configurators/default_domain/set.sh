#!/bin/sh

build_templated_mapfile()\r\n {\r\nif test -f /home/engines/templates/$map_file \r\n  then\r\n   if test -f /home/postfix/$map_file\r\n    then\r\n\t rm /home/postfix/$map_file\r\n\tfi \r\n   \r\n  cat /home/engines/templates/$map_file | while read LINE\r\n  do\r\n   eval echo \"$LINE\" >> /home/postfix/$map_file\r\n  done\r\n sudo -n /home/engines/scripts/engine/sudo/postmap.sh $map_file\r\nfi\r\n}\r\n . /home/engines/functions/checks.sh\r\nrequired_values=\"domain_name\"\r\ncheck_required_values \r\n\r\necho -n ${domain_name} >/home/engines/scripts/configurators/saved/domain\r\n\r\nif $deliver_local = true\r\n then\r\n  echo -n $deliver_local > /home/engines/scripts/configurators/saved/deliver_local\r\nelse \r\n  rm /home/engines/scripts/configurators/saved/deliver_local\r\nfi\r\n\r\nsudo -n /home/engines/scripts/engine/sudo/_set_mailname.sh smtp.${domain_name}\r\n\r\nfor map_file in generic sender_canonical aliases/aliases\r\ndo\r\n build_templated_mapfile\r\ndone\r\n \r\n/home/engines/scripts/configurators/build_transport.sh\r\n\t\r\n\r\n\r\nexit $?
